{"version":3,"sources":["config.js","request.js","setting.js","tools.js","validate.js","framework.js","navigation.js","editor.js"],"names":["backman","angular","module","config","$httpProvider","$urlRouterProvider","$controllerProvider","$compileProvider","$filterProvider","$provide","defaults","headers","put","post","get","X-Requested-With","transformRequest","data","param","obj","name","value","fullSubName","subName","subValue","innerObj","i","query","hasOwnProperty","Array","length","Object","undefined","encodeURIComponent","substr","isObject","String","aHrefSanitizationWhitelist","run","$rootScope","$state","$stateParams","dependences","app","concat","register","controller","directive","filter","factory","service","_tools","success","state","code","noVerify","window","location","href","alert","msg","transKeyName","__state","error","err","$http","_responePreHandler","_setting","url","postData","ajaxParams","extend","method","then","getData","params","_data","base","protocol","host","path","pathname","split","navListUrl","key","set","val","constant","urlData","getUrlParam","arr","l","a","type","json","toCamel","str","str2","indexOf","words","toUpperCase","join","toUnderline","test","replace","$1","toLowerCase","transform","json2","p","loadJs","jsList","$q","deferred","defer","$script","$apply","resolve","promise","isMobile","rgx","$","trim","isRequired","isMatchLength","len","isLengthInRange","isInRange","isIdCard","isTheSame","val1","val2","isCorrectPassword","$scope","sidebarOpen","act","toggleSidebar","_httpGet","getNavData","cb","cberr","apiAddress","item1","navList","hash","children","item2","j","push","renderNavigation","sort","sortNavigation","item","navData","order","scope","contentBind","restrict","link","iElm","iAttrs","eid","Date","now","parseInt","Math","random","attr","editor","KindEditor","create","items","width","height","resizeMode","allowFileManager","imageUploadJson","imageUploadUrl","afterChange","html","$$phase","$root","initW","$watch","newVal","oldVal","on","$this","this","parent","hasClass","removeClass","end","next","slideUp","addClass","slideDown","navInitHandler","newValue","oldValue","setTimeout","find","each","$parent1","show","$parent2"],"mappings":"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","file":"backman.min.js","sourcesContent":["var backman = angular.module('backman', ['ui.router']);\r\n\r\nbackman.config(function ($httpProvider, $urlRouterProvider, $controllerProvider, $compileProvider, $filterProvider, $provide) {\r\n\r\n    'use strict';\r\n\r\n    // 修正angularPost数据payload模式为formData模式\r\n    $httpProvider.defaults.headers.put['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    $httpProvider.defaults.headers.post['X-Requested-With'] = 'XMLHttpRequest';\r\n    $httpProvider.defaults.headers.get = {'X-Requested-With': 'XMLHttpRequest'};\r\n\r\n    // Override $http service's default transformRequest\r\n    $httpProvider.defaults.transformRequest = [function (data) {\r\n        /**\r\n         * The workhorse; converts an object to x-www-form-urlencoded serialization.\r\n         * @param {Object} obj\r\n         * @return {String}\r\n         */\r\n        var param = function (obj) {\r\n            var query = '';\r\n            var name, value, fullSubName, subName, subValue, innerObj, i;\r\n            for (name in obj) {\r\n                if (obj.hasOwnProperty(name)) {\r\n                    value = obj[name];\r\n                    if (value instanceof Array) {\r\n                        for (i = 0; i < value.length; ++i) {\r\n                            subValue = value[i];\r\n                            fullSubName = name + '[' + i + ']';\r\n                            innerObj = {};\r\n                            innerObj[fullSubName] = subValue;\r\n                            query += param(innerObj) + '&';\r\n                        }\r\n                    } else if (value instanceof Object) {\r\n                        for (subName in value) {\r\n                            if (value.hasOwnProperty(subName)) {\r\n                                subValue = value[subName];\r\n                                /* fullSubName = name + '[' + subName + ']'; //for node */\r\n                                fullSubName = name + '.' + subName;\r\n                                innerObj = {};\r\n                                innerObj[fullSubName] = subValue;\r\n                                query += param(innerObj) + '&';\r\n                            }\r\n                        }\r\n                    } else if (value !== undefined && value !== null) {\r\n                        query += encodeURIComponent(name) + '=' + encodeURIComponent(value) + '&';\r\n                    }\r\n                }\r\n            }\r\n            return query.length ? query.substr(0, query.length - 1) : query;\r\n        };\r\n        return angular.isObject(data) && String(data) !== '[object File]' ? param(data) : data;\r\n    }];\r\n\r\n    //增加angular自动过滤特殊url白名单\r\n    $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|file|sms|javascript):/);\r\n\r\n});\r\n\r\n//路由转接\r\nbackman.run(function ($rootScope, $state, $stateParams) {\r\n\r\n    'use strict';\r\n\r\n    $rootScope.$state = $state;\r\n    $rootScope.$stateParams = $stateParams;\r\n\r\n});\r\n\r\n//backman创建模块\r\nbackman.module = function (name, dependences) {\r\n\r\n    'use strict';\r\n\r\n    var app = angular.module(name, ['backman'].concat(dependences));\r\n    app.config(function($controllerProvider, $compileProvider, $filterProvider, $provide){\r\n        //异步controller注册器\r\n        app.register = {\r\n            controller: $controllerProvider.register,\r\n            directive: $compileProvider.directive,\r\n            filter: $filterProvider.register,\r\n            factory: $provide.factory,\r\n            service: $provide.service\r\n        };\r\n    });\r\n    return app;\r\n\r\n};\r\n\r\n\r\n\r\n","// 服务：请求预处理\r\nbackman.factory('_responePreHandler', function (_tools) {\r\n\r\n    'use strict';\r\n\r\n    return {\r\n        //正常通行\r\n        success: function (success, config) {\r\n            if (success.data.state.code == 20001 && config && config.noVerify == true) {\r\n                return;\r\n            }\r\n            if (success.data.state.code == 20001) {\r\n                window.location.href = '/usercenter/login-show';\r\n                return;\r\n            }\r\n            //code级报错\r\n            if (success.data.state.code != 10200 && success.data.state.code != 10205) {\r\n                success.data.data = null;\r\n                //throw new Error('Server Error!\\n\\r   success + '\\n\\r   Message: ' + data.state.msg);\r\n                alert(success.msg || (success.data && success.data.state && success.data.state.msg));\r\n                return null;\r\n            }\r\n            //正常code\r\n            if (success.data.state.code == 10205) {\r\n                return {};\r\n            } else {\r\n                var data = success.data.data ? _tools.transKeyName('camel', success.data.data) : {};\r\n                data.__state = success.data.state;\r\n                return data;\r\n            }\r\n        },\r\n        //http级报错\r\n        error: function (err) {\r\n            return err;\r\n        }\r\n    };\r\n\r\n});\r\n\r\nbackman.factory('_httpPost', function ($http, _tools, _responePreHandler, _setting) {\r\n\r\n    'use strict';\r\n\r\n    return function (url, postData, config) {\r\n        if (!config || !config.ajaxParams) {\r\n            angular.extend(postData, _setting.ajaxParams);\r\n        }\r\n        postData = _tools.transKeyName('underline', postData);\r\n        return $http({\r\n            method: 'POST',\r\n            url: url,\r\n            data: postData\r\n        }).then(function (success) {\r\n                return _responePreHandler.success(success, config);\r\n            }, function (err) {\r\n                return _responePreHandler.error(err);\r\n            }\r\n        );\r\n    };\r\n\r\n});\r\n\r\nbackman.factory('_httpGet', function ($http, _tools, _responePreHandler, _setting) {\r\n\r\n    'use strict';\r\n\r\n    return function (url, getData, config) {\r\n        if (!config || !config.ajaxParams) {\r\n            angular.extend(getData, _setting.ajaxParams);\r\n        }\r\n        getData = _tools.transKeyName('underline', getData);\r\n        return $http({\r\n            method: 'GET',\r\n            url: url,\r\n            params: getData\r\n        }).then(function (success) {\r\n            return _responePreHandler.success(success, config);\r\n        }, function (err) {\r\n            return _responePreHandler.error(err);\r\n        });\r\n    };\r\n\r\n});","backman.factory('_setting', function ($rootScope) {\r\n\r\n    'use strict';\r\n\r\n    var _data = {\r\n        base: location.protocol + '//' + location.host,\r\n        path: '/' + location.pathname.split('/index.html')[0],\r\n        ajaxParams: null,\r\n        navListUrl: ''\r\n    };\r\n    _data.navListUrl = _data.base + _data.path + '/_data/navList.json';\r\n\r\n    return {\r\n        get: function (key) {\r\n            return _data[key];\r\n        },\r\n        set: function (key, val) {\r\n            _data[key] = val;\r\n        }\r\n    };\r\n\r\n});","\r\nbackman.constant('_tools', (function () {\r\n\r\n    'use strict';\r\n\r\n    //获取url参数\r\n    var urlData = null;\r\n    var getUrlParam = function (name) {\r\n        if (!urlData) {\r\n            var url = window.location.href;\r\n            urlData = {};\r\n            var arr = url.split(\"?\");\r\n            if (arr.length > 1) {\r\n                arr = arr[1].split(\"&\");\r\n                for (var i = 0, l = arr.length; i < l; i++) {\r\n                    var a = arr[i].split(\"=\");\r\n                    urlData[a[0]] = a[1];\r\n                }\r\n                urlData = transKeyName('camel', urlData);\r\n            }\r\n        }\r\n        return urlData[name];\r\n    };\r\n\r\n    //峰驼与下划线命名模式转换\r\n    var transKeyName = function (type, json) {\r\n        //下划线字符串转小峰驼\r\n        var toCamel = function (str) {\r\n            var str2 = '';\r\n            if (str.indexOf('_') < 0) {\r\n                str2 = str;\r\n            } else {\r\n                var words = str.split('_');\r\n                for (var i = 1; i < words.length; i++) {\r\n                    words[i] = words[i].substr(0, 1).toUpperCase() + words[i].substr(1);\r\n                }\r\n                str2 = words.join('');\r\n            }\r\n            return str2;\r\n        };\r\n        //小峰驼字符串转下划线\r\n        var toUnderline = function (str) {\r\n            var str2 = '';\r\n            if ((/[A-Z]/).test(str)) {\r\n                str2 = str.replace(/([A-Z])/g, function ($1) {\r\n                    return '_' + $1.toLowerCase();\r\n                });\r\n            } else {\r\n                str2 = str;\r\n            }\r\n            return str2;\r\n        };\r\n        var transform = function (json, json2) {\r\n            for (var p in json) {\r\n                if (json.hasOwnProperty(p)) {\r\n                    var key;\r\n                    if (typeof p == 'string') {\r\n                        if (type == 'camel') {\r\n                            key = toCamel(p);\r\n                        } else if (type == 'underline') {\r\n                            key = toUnderline(p);\r\n                        }\r\n                    } else {\r\n                        key = p;\r\n                    }\r\n                    if (json[p] instanceof Object) {\r\n                        json2[key] = transform(json[p], typeof json[p].length == 'undefined' ? {} : []);\r\n                    } else {\r\n                        json2[key] = json[p];\r\n                    }\r\n                }\r\n            }\r\n            return json2;\r\n        };\r\n        return transform(json, typeof json.length == 'undefined' ? {} : []);\r\n    };\r\n\r\n    var loadJs = function (jsList) {\r\n        return function ($q, $rootScope) {\r\n            var deferred = $q.defer();\r\n            $script(jsList, function () {\r\n                $rootScope.$apply(function () {\r\n                    deferred.resolve();\r\n                });\r\n            });\r\n            return deferred.promise;\r\n        };\r\n    };\r\n\r\n    return {\r\n        getUrlParam: getUrlParam,\r\n        transKeyName: transKeyName,\r\n        loadJs: loadJs\r\n    };\r\n\r\n})());","backman.factory('_validate', function () {\r\n\r\n    'use strict';\r\n\r\n    return {\r\n        isMobile: function (val) {\r\n            var rgx = /^(13[0-9]|14[0-9]|15[0-9]|18[0-9])\\d{8}$/i;\r\n            return rgx.test($.trim(val));\r\n        },\r\n        isRequired: function (val) {\r\n            return $.trim(val) ? true : false;\r\n        },\r\n        isMatchLength: function (val, len) {\r\n            return (($.trim(val)).length == len);\r\n        },\r\n        isLengthInRange: function (val, arr) {\r\n            var len = ($.trim(val)).length;\r\n            return (len >= arr[0] && len <= arr[1]);\r\n        },\r\n        isInRange: function (val, arr) {\r\n            return (val >= arr[0] && val <= arr[1]);\r\n        },\r\n        isIdCard: function (val) {\r\n            var rgx = /^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{4}$/;\r\n            return rgx.test($.trim(val));\r\n        },\r\n        isTheSame: function (val1, val2) {\r\n            return (val1 == val2);\r\n        },\r\n        // 验证密码\r\n        isCorrectPassword: function (val) {\r\n            // 只包含数字或字母\r\n            var rgx = /^(?!\\d+$)(?![a-z]+$).+$/i;\r\n            return rgx.test($.trim(val));\r\n        }\r\n    };\r\n});","backman.controller('backmanFramework', function ($scope, _setting) {\r\n\r\n    'use strict';\r\n\r\n    //移动端导航栏显示隐藏\r\n    $scope.sidebarOpen = false;\r\n\r\n    $scope.act = {\r\n        //导航栏移动端显示隐藏\r\n        toggleSidebar: function () {\r\n            $scope.sidebarOpen = !$scope.sidebarOpen;\r\n        }\r\n    };\r\n\r\n});","backman.directive('bmSidebar', function () {\r\n    return {\r\n        scope: false,\r\n        restrict: 'A',\r\n        link: function ($scope, iElm, iAttrs) {\r\n            iElm.on('click', '.treeview-title', function () {\r\n                var $this = $(this);\r\n                if ($this.parent().hasClass('active')) {\r\n                    $this.parent().removeClass('active').end()\r\n                        .next('ul.treeview-menu').slideUp('fast');\r\n                } else {\r\n                    $this.parent().addClass('active').end()\r\n                        .next('ul.treeview-menu').slideDown('fast');\r\n                }\r\n            });\r\n            var navInitHandler = $scope.$watch('navData', function (newValue, oldValue) {\r\n                if (newValue) {\r\n                    navInitHandler();  //仅运行一次\r\n                    var hash = window.location.hash;\r\n                    setTimeout(function () {\r\n                        iElm.find('.treeview-link').each(function () {\r\n                            var $this = $(this);\r\n                            if ($this.attr('href') == hash) {\r\n                                var $parent1 = $this.parent().parent().show().parent().addClass('active');\r\n                                if ($parent1.hasClass('treeview')) {\r\n                                    var $parent2 = $parent1.parent().show().parent().addClass('active');\r\n                                    if ($parent2.hasClass('treeview')) {\r\n                                        $parent2.addClass('active');\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                    }, 0);\r\n                }\r\n            });\r\n        }\r\n    }\r\n});","backman.directive('bmEditor', function () {\r\n\r\n    'use strict';\r\n\r\n    return {\r\n        scope: {\r\n            contentBind: '='\r\n        },\r\n        restrict: 'A',\r\n        link: function ($scope, iElm, iAttrs) {\r\n            var eid = 'editor' + (Date.now() % 1e7) + parseInt(Math.random() * 1000);\r\n            iElm.attr('id', eid);\r\n            var editor = KindEditor.create('#' + eid, {\r\n                items: [\r\n                    \"source\", \"|\",\r\n                    \"undo\", \"redo\", \"|\",\r\n                    \"template\", \"code\", \"|\",\r\n                    \"cut\", \"copy\", \"paste\", \"plainpaste\", \"wordpaste\", \"|\",\r\n                    \"justifyleft\", \"justifycenter\", \"justifyright\", \"justifyfull\", \"insertorderedlist\",\r\n                    \"insertunorderedlist\", \"indent\", \"outdent\", \"subscript\", \"superscript\", \"clearhtml\",\r\n                    \"quickformat\", \"|\", \"selectall\", \"fullscreen\", \"/\",\r\n                    \"formatblock\", \"fontname\", \"fontsize\", \"|\",\r\n                    \"forecolor\", \"hilitecolor\", \"bold\", \"italic\", \"underline\", \"strikethrough\", \"lineheight\",\r\n                    \"removeformat\", \"|\",\r\n                    \"image\", \"table\", \"hr\", \"emoticons\", \"baidumap\", \"pagebreak\", \"anchor\", \"link\", \"unlink\", \"|\",\r\n                    \"preview\", \"print\", \"about\"\r\n                ],\r\n                width: '100%',\r\n                height: '270px',\r\n                resizeMode: 1,\r\n                allowFileManager: false,\r\n                imageUploadJson: iAttrs.imageUploadUrl || '',\r\n                afterChange: function () {\r\n                    if (editor && editor.html()) {\r\n                        $scope.contentBind = editor.html();\r\n                        if (!$scope.$$phase && !$scope.$root.$$phase) {\r\n                            $scope.$apply();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            //初次数据\r\n            var initW = $scope.$watch('contentBind', function (newVal, oldVal) {\r\n                if (newVal) {\r\n                    initW();\r\n                    editor.html(newVal + '');\r\n                }\r\n            });\r\n        }\r\n    }\r\n});"],"sourceRoot":"build/backman/"}